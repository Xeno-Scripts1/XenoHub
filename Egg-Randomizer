-- Xeno's Egg Randomizer UI + ESP Integration (Rounded + Refreshed)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "XenoEggRandomizerUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Main Frame (Rounded)
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 360, 0, 330)
mainFrame.Position = UDim2.new(0.5, -180, 0.5, -165)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BackgroundTransparency = 0.2
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 16)
mainCorner.Parent = mainFrame

-- Title Bar
local titleBar = Instance.new("TextLabel")
titleBar.Size = UDim2.new(1, 0, 0, 36)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
titleBar.BorderSizePixel = 0
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 18
titleBar.TextColor3 = Color3.new(1, 1, 1)
titleBar.Text = "‚ôªÔ∏è Xeno's Egg Randomizer ‚ôªÔ∏è"
titleBar.TextWrapped = true
titleBar.Parent = mainFrame

-- Exit Button
local exitButton = Instance.new("TextButton")
exitButton.Size = UDim2.new(0, 32, 0, 32)
exitButton.Position = UDim2.new(1, -40, 0, 2)
exitButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
exitButton.Text = "X"
exitButton.TextColor3 = Color3.new(1, 1, 1)
exitButton.Font = Enum.Font.GothamBold
exitButton.TextSize = 18
exitButton.BorderSizePixel = 0
exitButton.Parent = mainFrame

exitButton.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

exitButton.MouseEnter:Connect(function()
    exitButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
end)
exitButton.MouseLeave:Connect(function()
    exitButton.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
end)

-- Auto Reroll Button
local autoButton = Instance.new("TextButton")
autoButton.Size = UDim2.new(1, -40, 0, 46)
autoButton.Position = UDim2.new(0, 20, 0, 52)
autoButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
autoButton.Text = "‚ôªÔ∏è Auto Reroll: OFF ‚ôªÔ∏è"
autoButton.TextColor3 = Color3.new(1, 1, 1)
autoButton.Font = Enum.Font.GothamBold
autoButton.TextSize = 16
autoButton.BorderSizePixel = 0
autoButton.Parent = mainFrame

local autoCorner = Instance.new("UICorner")
autoCorner.CornerRadius = UDim.new(0, 8)
autoCorner.Parent = autoButton

-- Manual Reroll Button
local manualButton = Instance.new("TextButton")
manualButton.Size = UDim2.new(1, -40, 0, 46)
manualButton.Position = UDim2.new(0, 20, 0, 112)
manualButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
manualButton.Text = "üîÅ Manual Reroll üîÅ"
manualButton.TextColor3 = Color3.new(1, 1, 1)
manualButton.Font = Enum.Font.GothamBold
manualButton.TextSize = 16
manualButton.BorderSizePixel = 0
manualButton.Parent = mainFrame

local manualCorner = Instance.new("UICorner")
manualCorner.CornerRadius = UDim.new(0, 8)
manualCorner.Parent = manualButton

-- Loading Bar (above footer)
local loadingBar = Instance.new("Frame")
loadingBar.Size = UDim2.new(0, 0, 0, 8)
loadingBar.Position = UDim2.new(0.05, 0, 1, -64)
loadingBar.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
loadingBar.BorderSizePixel = 0
loadingBar.Visible = false
loadingBar.Parent = mainFrame

local loadingLabel = Instance.new("TextLabel")
loadingLabel.Size = UDim2.new(1, 0, 0, 20)
loadingLabel.Position = UDim2.new(0, 0, 1, -82)
loadingLabel.BackgroundTransparency = 1
loadingLabel.TextColor3 = Color3.new(1, 1, 1)
loadingLabel.Font = Enum.Font.GothamBold
loadingLabel.TextSize = 14
loadingLabel.Text = ""
loadingLabel.Visible = false
loadingLabel.Parent = mainFrame

-- Warning
local warning = Instance.new("TextLabel")
warning.Size = UDim2.new(1, -24, 0, 45)
warning.Position = UDim2.new(0, 12, 0, 172)
warning.BackgroundTransparency = 1
warning.TextColor3 = Color3.fromRGB(170, 255, 170)
warning.Font = Enum.Font.GothamBold
warning.TextSize = 14
warning.Text = "‚ö†Ô∏è THIS SCRIPT IS SAFE TO USE\nüõ°Ô∏è ANTI STEALER ACTIVATED"
warning.TextWrapped = true
warning.TextXAlignment = Enum.TextXAlignment.Center
warning.TextYAlignment = Enum.TextYAlignment.Top
warning.Parent = mainFrame

-- Footer
local footer = Instance.new("TextLabel")
footer.Size = UDim2.new(1, 0, 0, 28)
footer.Position = UDim2.new(0, 0, 1, -28)
footer.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
footer.Text = "‚ôªÔ∏è Made by XenoScripts | Premium ‚ôªÔ∏è"
footer.TextColor3 = Color3.new(1, 1, 1)
footer.Font = Enum.Font.GothamBold
footer.TextSize = 12
footer.TextXAlignment = Enum.TextXAlignment.Center
footer.Parent = mainFrame

-- Pet Eggs & Names with Weighted Chances (Your data)
local eggsData = {
    ["Common Egg"] = {
        {name = "Dog", chance = 33},
        {name = "Bunny", chance = 33},
        {name = "Golden Lab", chance = 33}
    },
    ["Uncommon Egg"] = {
        {name = "Black Bunny", chance = 25},
        {name = "Chicken", chance = 25},
        {name = "Cat", chance = 25},
        {name = "Deer", chance = 25}
    },
    ["Rare Egg"] = {
        {name = "Orange Tabby", chance = 33.33},
        {name = "Spotted Deer", chance = 25},
        {name = "Pig", chance = 16.67},
        {name = "Rooster", chance = 16.67},
        {name = "Monkey", chance = 8.33}
    },
    ["Legendary Egg"] = {
        {name = "Cow", chance = 42.55},
        {name = "Silver Monkey", chance = 42.55},
        {name = "Sea Otter", chance = 10.64},
        {name = "Turtle", chance = 2.13},
        {name = "Polar Bear", chance = 2.13}
    },
    ["Mythic Egg"] = {
        {name = "Grey Mouse", chance = 37.5},
        {name = "Brown Mouse", chance = 26.79},
        {name = "Squirrel", chance = 26.79},
        {name = "Red Giant Ant", chance = 8.93},
        {name = "Red Fox", chance = 0}
    },
    ["Bug Egg"] = {
        {name = "Snail", chance = 40},
        {name = "Giant Ant", chance = 35},
        {name = "Caterpillar", chance = 25},
        {name = "Praying Mantis", chance = 0},
        {name = "Dragon Fly", chance = 0}
    },
    ["Night Egg"] = {
        {name = "Hedgehog", chance = 47},
        {name = "Mole", chance = 23.5},
        {name = "Frog", chance = 21.16},
        {name = "Echo Frog", chance = 8.35},
        {name = "Night Owl", chance = 0},
        {name = "Raccoon", chance = 0}
    },
    ["Bee Egg"] = {
        {name = "Bee", chance = 65},
        {name = "Honey Bee", chance = 20},
        {name = "Bear Bee", chance = 10},
        {name = "Petal Bee", chance = 5},
        {name = "Queen Bee", chance = 0}
    },
    ["Anti Bee Egg"] = {
        {name = "Wasp", chance = 55},
        {name = "Tarantula Hawk", chance = 31},
        {name = "Moth", chance = 14},
        {name = "Butterfly", chance = 0},
        {name = "Disco Bee", chance = 0}
    },
    ["Common Summer Egg"] = {
        {name = "Starfish", chance = 50},
        {name = "Seafull", chance = 25},
        {name = "Crab", chance = 25}
    },
    ["Rare Summer Egg"] = {
        {name = "Flamingo", chance = 30},
        {name = "Toucan", chance = 25},
        {name = "Sea Turtle", chance = 20},
        {name = "Orangutan", chance = 15},
        {name = "Seal", chance = 10}
    },
    ["Paradise Egg"] = {
        {name = "Ostrich", chance = 43},
        {name = "Peacock", chance = 33},
        {name = "Capybara", chance = 24},
        {name = "Scarlet Macaw", chance = 3},
        {name = "Mimic Octopus", chance = 1}
    },
    ["Premium Night Egg"] = {
        {name = "Hedgehog", chance = 50},
        {name = "Mole", chance = 26},
        {name = "Frog", chance = 14},
        {name = "Echo Frog", chance = 10}
    },
    ["Dinosaur Egg"] = {
        {name = "Raptor", chance = 33},
        {name = "Triceratops", chance = 33},
        {name = "T-Rex", chance = 1},
        {name = "Stegosaurus", chance = 33},
        {name = "Pterodactyl", chance = 33},
        {name = "Brontosaurus", chance = 33}
    }
}

-- Weighted Random Selection Function
local function choosePet(list)
    local total = 0
    for _, v in ipairs(list) do total += v.chance end
    local roll = math.random() * total
    local acc = 0
    for _, v in ipairs(list) do
        acc += v.chance
        if roll <= acc then return v.name end
    end
    return list[#list].name -- fallback
end

-- Update ESP to display egg name and random pet name from your data
local function updateESP()
    for _, egg in ipairs(workspace:GetDescendants()) do
        if egg:IsA("Model") and eggsData[egg.Name] then
            local orig = egg.Name
            local pet = choosePet(eggsData[egg.Name])
            local gui = egg:FindFirstChild("XenoPetESP")
            if not gui then
                gui = Instance.new("BillboardGui")
                gui.Name = "XenoPetESP"
                gui.Size = UDim2.new(0, 150, 0, 60)
                gui.Adornee = egg.PrimaryPart or egg:FindFirstChildWhichIsA("BasePart")
                gui.StudsOffset = Vector3.new(0, 2, 0)
                gui.AlwaysOnTop = true
                gui.Parent = egg

                local label = Instance.new("TextLabel")
                label.Name = "InfoLabel"
                label.Size = UDim2.new(1, 0, 1, 0)
                label.BackgroundTransparency = 1
                label.Font = Enum.Font.GothamBold
                label.TextSize = 14
                label.TextColor3 = Color3.new(1,1,1)
                label.TextStrokeTransparency = 0.5
                label.TextStrokeColor3 = Color3.new(0, 0, 0)
                label.Parent = gui
            end
            gui.InfoLabel.Text = orig .. " ‚ûü " .. pet
        end
    end
end

-- Auto Reroll & Loading Logic
local autoEnabled = false
autoButton.MouseButton1Click:Connect(function()
    autoEnabled = not autoEnabled
    autoButton.Text = autoEnabled and "‚ôªÔ∏è Auto Reroll: ON ‚ôªÔ∏è" or "‚ôªÔ∏è Auto Reroll: OFF ‚ôªÔ∏è"
    autoButton.BackgroundColor3 = autoEnabled and Color3.fromRGB(100, 230, 100) or Color3.fromRGB(100, 100, 100)
    loadingBar.Visible = autoEnabled
    loadingLabel.Visible = autoEnabled
end)

manualButton.MouseButton1Click:Connect(updateESP)

-- Repeat every 3 seconds when enabled
spawn(function()
    while true do
        if autoEnabled then
            for i = 0, 100, 5 do
                loadingBar.Size = UDim2.new(i/100, 0, 0, 8)
                loadingLabel.Text = ("Refreshing in %ds"):format(math.ceil((100 - i) * 3 / 100))
                wait(0.15)
            end
            updateESP()
        end
        wait(0.1)
    end
end)
