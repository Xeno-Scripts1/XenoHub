local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- UI Setup
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = "EggRandomizerUI"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame", screenGui)
mainFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
mainFrame.Size = UDim2.new(0, 310, 0, 240)
mainFrame.Position = UDim2.new(0.5, -155, 0.3, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BorderSizePixel = 0

local mainCorner = Instance.new("UICorner", mainFrame)
mainCorner.CornerRadius = UDim.new(0, 12)

-- Title Bar
local titleBar = Instance.new("TextLabel", mainFrame)
titleBar.Text = "‚ôªÔ∏è Xeno's Egg Randomizer ‚ôªÔ∏è"
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.Position = UDim2.new(0, 0, 0, 0)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
titleBar.TextColor3 = Color3.new(1, 1, 1)
titleBar.Font = Enum.Font.GothamBold
titleBar.TextSize = 16
titleBar.TextWrapped = true
titleBar.TextXAlignment = Enum.TextXAlignment.Center

local titleTopCorner = Instance.new("UICorner", titleBar)
titleTopCorner.CornerRadius = UDim.new(0, 10)

-- Exit Button
local exitButton = Instance.new("TextButton", mainFrame)
exitButton.Text = "‚ùå"
exitButton.Size = UDim2.new(0, 25, 0, 25)
exitButton.Position = UDim2.new(1, -30, 0, 2)
exitButton.BackgroundColor3 = Color3.fromRGB(90, 0, 0)
exitButton.TextColor3 = Color3.new(1, 1, 1)
exitButton.Font = Enum.Font.GothamBold
exitButton.TextSize = 14
exitButton.BorderSizePixel = 0
exitButton.MouseButton1Click:Connect(function()
	screenGui:Destroy()
end)

-- Auto Button
local autoButton = Instance.new("TextButton", mainFrame)
autoButton.Size = UDim2.new(1, -20, 0, 32)
autoButton.Position = UDim2.new(0, 10, 0, 40)
autoButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
autoButton.TextColor3 = Color3.new(1, 1, 1)
autoButton.Font = Enum.Font.GothamBold
autoButton.TextSize = 14
autoButton.Text = "üé≤ Auto Reroll: OFF"
autoButton.AutoButtonColor = false
autoButton.BorderSizePixel = 0

-- Manual Button
local manualButton = Instance.new("TextButton", mainFrame)
manualButton.Size = UDim2.new(1, -20, 0, 32)
manualButton.Position = UDim2.new(0, 10, 0, 80)
manualButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
manualButton.TextColor3 = Color3.new(1, 1, 1)
manualButton.Font = Enum.Font.GothamBold
manualButton.TextSize = 14
manualButton.Text = "üé≤ Manual Reroll"
manualButton.AutoButtonColor = false
manualButton.BorderSizePixel = 0

-- Warning Label
local warning = Instance.new("TextLabel", mainFrame)
warning.Text = "‚ö†Ô∏è THIS SCRIPT IS NOT STEALING YOUR PETS\nüõ°Ô∏è ANTI STEALER ACTIVATED"
warning.Size = UDim2.new(1, -20, 0, 45)
warning.Position = UDim2.new(0, 10, 0, 125)
warning.BackgroundTransparency = 1
warning.TextColor3 = Color3.fromRGB(255, 120, 120)
warning.Font = Enum.Font.Gotham
warning.TextSize = 13
warning.TextWrapped = true
warning.TextXAlignment = Enum.TextXAlignment.Center
warning.TextYAlignment = Enum.TextYAlignment.Top

-- Footer
local footer = Instance.new("TextLabel", mainFrame)
footer.Text = "üêæ Powered by XenoWare üêæ"
footer.Size = UDim2.new(1, 0, 0, 25)
footer.Position = UDim2.new(0, 0, 1, -25)
footer.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
footer.TextColor3 = Color3.new(1, 1, 1)
footer.Font = Enum.Font.Gotham
footer.TextSize = 13
footer.TextXAlignment = Enum.TextXAlignment.Center

-- Egg Data
local eggChances = {
	["Common Egg"] = {["Dog"] = 33, ["Bunny"] = 33, ["Golden Lab"] = 33},
	["Uncommon Egg"] = {["Black Bunny"] = 25, ["Chicken"] = 25, ["Cat"] = 25, ["Deer"] = 25},
	["Rare Egg"] = {["Orange Tabby"] = 33.33, ["Spotted Deer"] = 25, ["Pig"] = 16.67, ["Rooster"] = 16.67, ["Monkey"] = 8.33},
	["Legendary Egg"] = {["Cow"] = 42.55, ["Silver Monkey"] = 42.55, ["Sea Otter"] = 10.64, ["Turtle"] = 2.13, ["Polar Bear"] = 2.13},
	["Dinosaur Egg"] = {["Raptor"] = 33, ["Triceratops"] = 33, ["T-Rex"] = 1, ["Stegosaurus"] = 33, ["Pterodactyl"] = 33, ["Brontosaurus"] = 33}
}

-- ESP Logic
local function weightedRandom(pool)
	local total = 0
	for _, weight in pairs(pool) do total += weight end
	local roll = math.random() * total
	local cumulative = 0
	for pet, weight in pairs(pool) do
		cumulative += weight
		if roll <= cumulative then return pet end
	end
end

local function createOrUpdateBillboard(egg, eggName, petName, color)
	local gui = egg:FindFirstChild("PetESP") or Instance.new("BillboardGui")
	gui.Name = "PetESP"
	gui.AlwaysOnTop = true
	gui.Size = UDim2.new(0, 200, 0, 50)
	gui.StudsOffset = Vector3.new(0, 2.5, 0)
	gui.Adornee = egg:FindFirstChildWhichIsA("BasePart") or egg

	local label = gui:FindFirstChild("TextLabel") or Instance.new("TextLabel", gui)
	label.Size = UDim2.new(1, 0, 1, 0)
	label.BackgroundTransparency = 1
	label.TextColor3 = color or Color3.new(1, 1, 1)
	label.TextStrokeTransparency = 0.4
	label.TextScaled = true
	label.Font = Enum.Font.GothamBold
	label.Text = eggName .. " | " .. petName
	gui.Parent = egg
end

local function findEggs()
	local eggs = {}
	for _, desc in ipairs(workspace:GetDescendants()) do
		if desc:IsA("Model") and desc.Name:match("Egg") and desc:FindFirstChildWhichIsA("BasePart") then
			local eggName = desc.Name
			if eggChances[eggName] then
				table.insert(eggs, {egg = desc, name = eggName})
			end
		end
	end
	return eggs
end

-- Auto Logic
local autoReroll = false
autoButton.MouseButton1Click:Connect(function()
	autoReroll = not autoReroll
	autoButton.Text = autoReroll and "üé≤ Auto Reroll: ON" or "üé≤ Auto Reroll: OFF"
end)

manualButton.MouseButton1Click:Connect(function()
	for _, info in ipairs(findEggs()) do
		local petName = weightedRandom(eggChances[info.name]) or "?"
		createOrUpdateBillboard(info.egg, info.name, petName)
	end
end)

-- Rainbow Animation
local hue = 0
RunService.RenderStepped:Connect(function(dt)
	hue = (hue + dt * 0.1) % 1
	local color = Color3.fromHSV(hue, 1, 1)
	titleBar.TextColor3 = color
	if autoReroll then autoButton.BackgroundColor3 = color end
	for _, info in ipairs(findEggs()) do
		local gui = info.egg:FindFirstChild("PetESP")
		if gui and gui:FindFirstChild("TextLabel") then
			gui.TextLabel.TextColor3 = color
		end
	end
end)

task.spawn(function()
	while true do
		if autoReroll then
			for _, info in ipairs(findEggs()) do
				local petName = weightedRandom(eggChances[info.name]) or "?"
				createOrUpdateBillboard(info.egg, info.name, petName)
			end
		end
		task.wait(1)
	end
end)
