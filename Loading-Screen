local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Remove old UI if it exists
if PlayerGui:FindFirstChild("PetSpawnerUI") then
	PlayerGui.PetSpawnerUI:Destroy()
end

-- Pet asset table
local PetAssets = {
	["Kitsune"] = "rbxassetid://12345678",
	["Dragonfly"] = "rbxassetid://12345679",
	["Disco bee"] = "rbxassetid://12345680",
	["Mimic octopus"] = "rbxassetid://12345681",
	["Butterfly"] = "rbxassetid://12345682",
	["Raccoon"] = "rbxassetid://12345683",
	["T-Rex"] = "rbxassetid://12345684",
	["Fennec Fox"] = "rbxassetid://12345685",
	["Spinosaurus"] = "rbxassetid://12345686",
	["Chicken Zombie"] = "rbxassetid://12345687"
}

-- UI Setup
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = "PetSpawnerUI"
screenGui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 400, 0, 300)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
mainFrame.BackgroundTransparency = 0
mainFrame.Parent = screenGui

local uiCorner = Instance.new("UICorner", mainFrame)
uiCorner.CornerRadius = UDim.new(0, 16)

local title = Instance.new("TextLabel", mainFrame)
title.Text = "üêæ Xeno's Pet Spawner üêæ"
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Font = Enum.Font.GothamBold
title.TextScaled = true
title.TextColor3 = Color3.fromRGB(255, 255, 255)

-- Dropdown (Pet Selection)
local petDropdown = Instance.new("TextButton", mainFrame)
petDropdown.Position = UDim2.new(0.05, 0, 0.18, 0)
petDropdown.Size = UDim2.new(0.9, 0, 0.12, 0)
petDropdown.Text = "Select a Pet"
petDropdown.Font = Enum.Font.GothamSemibold
petDropdown.TextColor3 = Color3.new(1, 1, 1)
petDropdown.BackgroundColor3 = Color3.fromRGB(100, 149, 237)

local uiCorner2 = Instance.new("UICorner", petDropdown)
uiCorner2.CornerRadius = UDim.new(0, 8)

-- Dropdown menu
local dropdownMenu = Instance.new("Frame", mainFrame)
dropdownMenu.Size = UDim2.new(0.9, 0, 0, 0)
dropdownMenu.Position = UDim2.new(0.05, 0, 0.3, 0)
dropdownMenu.BackgroundColor3 = Color3.fromRGB(240, 248, 255)
dropdownMenu.ClipsDescendants = true
dropdownMenu.Visible = false

local dropdownCorner = Instance.new("UICorner", dropdownMenu)
dropdownCorner.CornerRadius = UDim.new(0, 8)

-- Age and Weight Labels
local ageLabel = Instance.new("TextLabel", mainFrame)
ageLabel.Text = "Age"
ageLabel.Size = UDim2.new(0.45, -5, 0.08, 0)
ageLabel.Position = UDim2.new(0.05, 0, 0.43, 0)
ageLabel.BackgroundTransparency = 1
ageLabel.Font = Enum.Font.GothamSemibold
ageLabel.TextColor3 = Color3.new(1, 1, 1)
ageLabel.TextScaled = true

local weightLabel = ageLabel:Clone()
weightLabel.Text = "Weight"
weightLabel.Position = UDim2.new(0.5, 5, 0.43, 0)
weightLabel.Parent = mainFrame

-- Age Input
local ageBox = Instance.new("TextBox", mainFrame)
ageBox.PlaceholderText = "Enter Age"
ageBox.Size = UDim2.new(0.45, -5, 0.12, 0)
ageBox.Position = UDim2.new(0.05, 0, 0.52, 0)
ageBox.Font = Enum.Font.Gotham
ageBox.TextColor3 = Color3.new(0, 0, 0)
ageBox.BackgroundColor3 = Color3.fromRGB(220, 220, 255)

local ageCorner = Instance.new("UICorner", ageBox)
ageCorner.CornerRadius = UDim.new(0, 6)

-- Weight Input
local weightBox = ageBox:Clone()
weightBox.PlaceholderText = "Enter Weight"
weightBox.Position = UDim2.new(0.5, 5, 0.52, 0)
weightBox.Parent = mainFrame

-- Loading bar
local loadingBar = Instance.new("Frame", mainFrame)
loadingBar.Size = UDim2.new(0, 0, 0.06, 0)
loadingBar.Position = UDim2.new(0.05, 0, 0.66, 0)
loadingBar.BackgroundColor3 = Color3.fromRGB(0, 255, 127)
loadingBar.Visible = false

local loadingCorner = Instance.new("UICorner", loadingBar)
loadingCorner.CornerRadius = UDim.new(1, 0)

-- Spawn Button
local spawnButton = Instance.new("TextButton", mainFrame)
spawnButton.Size = UDim2.new(0.9, 0, 0.12, 0)
spawnButton.Position = UDim2.new(0.05, 0, 0.75, 0)
spawnButton.Text = "Spawn Pet"
spawnButton.Font = Enum.Font.GothamBold
spawnButton.TextColor3 = Color3.new(1, 1, 1)
spawnButton.BackgroundColor3 = Color3.fromRGB(34, 139, 34)

local spawnCorner = Instance.new("UICorner", spawnButton)
spawnCorner.CornerRadius = UDim.new(0, 8)

-- Dropdown logic
local dropdownOpen = false
petDropdown.MouseButton1Click:Connect(function()
	dropdownOpen = not dropdownOpen
	dropdownMenu.Visible = dropdownOpen
	dropdownMenu.Size = dropdownOpen and UDim2.new(0.9, 0, 0.2, 0) or UDim2.new(0.9, 0, 0, 0)
end)

-- Fill dropdown
local y = 0
for petName in pairs(PetAssets) do
	local option = Instance.new("TextButton", dropdownMenu)
	option.Size = UDim2.new(1, 0, 0, 24)
	option.Position = UDim2.new(0, 0, 0, y)
	option.Text = petName
	option.Font = Enum.Font.Gotham
	option.BackgroundColor3 = Color3.fromRGB(220, 230, 250)
	option.TextColor3 = Color3.new(0, 0, 0)

	option.MouseButton1Click:Connect(function()
		petDropdown.Text = petName
		dropdownMenu.Visible = false
		dropdownOpen = false
	end)

	y = y + 24
end

-- Pet spawning logic
spawnButton.MouseButton1Click:Connect(function()
	local selectedPet = petDropdown.Text
	local age = tonumber(ageBox.Text)
	local weight = tonumber(weightBox.Text)

	if not PetAssets[selectedPet] or not age or not weight then
		warn("Missing data")
		return
	end

	-- Show loading bar
	loadingBar.Size = UDim2.new(0, 0, 0.06, 0)
	loadingBar.Visible = true
	local tween = TweenService:Create(loadingBar, TweenInfo.new(3), {Size = UDim2.new(0.9, 0, 0.06, 0)})
	tween:Play()
	tween.Completed:Wait()

	-- Load pet model
	local success, model = pcall(function()
		return game:GetObjects(PetAssets[selectedPet])[1]
	end)
	if not success or not model then return end

	-- Create Tool
	local tool = Instance.new("Tool")
	tool.Name = selectedPet
	model.Parent = tool
	tool.RequiresHandle = false
	tool.CanBeDropped = false

	-- Scale model
	model:SetPrimaryPartCFrame(CFrame.new())
	for _, part in ipairs(model:GetDescendants()) do
		if part:IsA("BasePart") then
			part.Size = part.Size * ((age + weight) / 20)
		end
	end

	-- Parent to Backpack and Equip
	tool.Parent = LocalPlayer.Backpack
	LocalPlayer.Character:WaitForChild("Humanoid"):EquipTool(tool)

	loadingBar.Visible = false
end)
